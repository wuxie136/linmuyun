KEEP.initCodeBlockTools=()=>{HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this),e.appendChild(this)};const{style:e}=KEEP.theme_config?.code_copy||{},{style:t}=KEEP.theme_config?.code_block||{},{style:o}=KEEP.theme_config?.code_block?.tools||{},s="mac"===(e||t||o||"default"),a=s?"fas fa-chevron-left":"fas fa-chevron-right",{copy:c,copied:n,fold:l,folded:d}=KEEP.language_code_block,r=`<span class="tool fold tooltip" data-content="${l}" data-offset-y="-2px"><i class="fas fa-chevron-down"></i></span>`;document.querySelectorAll("figure.highlight").forEach((e=>{let t=e.classList.length?e.classList[1].toUpperCase():"";"PLAINTEXT"===t&&(t="");const o=document.createElement("div");o.classList.add("highlight-container"),s&&o.classList.add("mac"),e.wrap(o);const i=""+(t?'<span class="code-lang">'+t+"</span>":"");o.insertAdjacentHTML("afterbegin",`<div class="code-tools-box">\n        ${s?r+i:"<span>"+r+i+"</span>"}\n        <span class="tool copy tooltip" data-content="${c}" data-offset-y="-2px"><i class="fas fa-copy"></i></span>\n      </div>`);const p=e.parentNode.querySelector(".code-tools-box"),f=p.querySelector(".copy"),y=p.querySelector(".fold");f.addEventListener("click",(t=>{const o=t.currentTarget,s=[...e.querySelectorAll(".code .line")].map((e=>e.innerText)).join("\n"),a=document.createElement("textarea");a.style.top=window.scrollY+"px",a.style.position="absolute",a.style.opacity="0",a.readOnly=!0,a.value=s,document.body.append(a);const c=document.getSelection(),l=c.rangeCount>0&&c.getRangeAt(0);a.select(),a.setSelectionRange(0,s.length),a.readOnly=!1;const d=document.execCommand("copy"),r=o.querySelector("i"),i=p.querySelector(".copy .tooltip-content");d?(r.className="fas fa-check",i&&(i.innerHTML=n)):r.className="fas fa-times",a.blur(),o.blur(),l&&(c.removeAllRanges(),c.addRange(l)),document.body.removeChild(a)})),f.addEventListener("mouseleave",(e=>{setTimeout((()=>{e.target.querySelector("i").className="fas fa-copy";const t=p.querySelector(".copy .tooltip-content");t&&(t.innerHTML=c)}),500)}));let m=!1;y.addEventListener("click",(t=>{const o=t.currentTarget.querySelector("i"),s=p.querySelector(".fold .tooltip-content");m=!m,m?(o.className=a,e.classList.add("folded"),p.classList.add("folded"),s&&(s.innerHTML=d)):(o.className="fas fa-chevron-down",e.classList.remove("folded"),p.classList.remove("folded"),s&&(s.innerHTML=l))}))}))};