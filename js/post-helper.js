function initToggleShowToc(){KEEP.utils.postHelper={postPageContainerDom:document.querySelector(".post-page-container"),toggleShowTocBtnDom:document.querySelector(".toggle-show-toc"),toggleShowTocIcon:document.querySelector(".toggle-show-toc i"),mainContentDom:document.querySelector(".main-content"),postToolsDom:document.querySelector(".post-tools"),goToCommentsDom:document.querySelector(".post-tools .go-to-comments"),isShowToc:!1,initToggleToc(){this.toggleShowTocBtnDom&&this.toggleShowTocBtnDom.addEventListener("click",(()=>{this.isShowToc=!this.isShowToc,KEEP.styleStatus.isShowToc=this.isShowToc,KEEP.setStyleStatus(),this.handleToggleToc(this.isShowToc)}))},handleToggleToc(t){t?(this.postPageContainerDom.classList.add("show-toc"),document.body.classList.add("has-toc")):(this.postPageContainerDom.classList.remove("show-toc"),document.body.classList.remove("has-toc")),setTimeout((()=>{this.setPostToolsLeft()}),120)},hasToc(t){this.toggleShowTocBtnDom.style.display="flex",this.isShowToc=t,this.handleToggleToc(t)},setPostToolsLeft(t){const o=t||this.mainContentDom.getBoundingClientRect().width.toFixed(0);let e=5;window.innerWidth<=800&&(e=3),this.postToolsDom.style.opacity="1",this.postToolsDom.style.left=`calc((100vw - ${o}px) / 2 - ${e}rem)`},initSetPostToolsLeft(){setTimeout((()=>{this.setPostToolsLeft()}),150),window.addEventListener("resize",(()=>{this.setPostToolsLeft()}))},goToComments(){const t=document.querySelector("#comments-anchor");this.goToCommentsDom&&t&&this.goToCommentsDom.addEventListener("click",(o=>{o.preventDefault();let e=window.scrollY;e=0===e?-20:e;const s=t.getBoundingClientRect().top+e;window.anime({targets:document.scrollingElement,duration:300,easing:"linear",scrollTop:s,complete:()=>{setTimeout((()=>{KEEP.utils.pageTop_dom.classList.add("hide")}),150)}})}))},watchPostCommentsCount(){const t=this.postToolsDom.querySelector(".post-comments-count");if(!t)return;const o=new MutationObserver((function(e){e.forEach((e=>{if("childList"===e.type){const s=Number(e.target.innerHTML);s>0&&(t.style.display="flex",s>99&&(t.innerHTML="99+",o.disconnect()))}}))}));o.observe(t,{attributes:!0,childList:!0})},initSetPostLink(){const t=document.querySelector(".copyright-info-content .post-link .content");t&&(t.innerHTML=decodeURI(window.location.href))},copyCopyrightInfo(){const t=document.querySelector(".copyright-info-content"),o=document.querySelector(".copy-copyright-info"),e=o.querySelector("i"),s=KEEP.language_copy_copyright,n="en"===KEEP.hexo_config.language?": ":"ï¼š";let i=!1;const c=(t,s,n,c)=>{e&&(e.classList.remove(t),e.classList.add(s));const l=o.querySelector(".tooltip-content");l&&(l.innerHTML=n),i=c};o.addEventListener("click",(()=>{if(!i){const o=t.querySelector(".post-author .content").innerHTML,e=t.querySelector(".post-link .content").innerHTML,i=`${s.author}${n}${o}\n${s.link}${n}${e}`;navigator.clipboard.writeText(i).then((()=>{c("fa-copy","fa-check",s.copied,!0)}))}})),o.addEventListener("mouseleave",(()=>{setTimeout((()=>{c("fa-check","fa-copy",s.copy,!1)}),500)}))},setArticleAgingDays(){const t=document.querySelector(".article-content .article-aging-tips");if(t){const o=t.querySelector(".days"),e=Date.now(),s=864e5,n=(t.dataset?.agingDays||30)*s,i=e-new Date(t.dataset.updateDate).getTime(),c=(i/s).toFixed(0);i>=n&&(o.innerHTML=c,t.style.display="block")}}},KEEP.utils.postHelper.initSetPostToolsLeft(),KEEP.utils.postHelper.setArticleAgingDays(),!0===KEEP.theme_config.toc?.enable&&KEEP.utils.postHelper.initToggleToc(),!0===KEEP.theme_config.comment?.enable&&(KEEP.utils.postHelper.goToComments(),KEEP.utils.postHelper.watchPostCommentsCount()),!0===KEEP.theme_config.post?.copyright_info&&(KEEP.utils.postHelper.initSetPostLink(),KEEP.utils.postHelper.copyCopyrightInfo())}!0===KEEP.theme_config.pjax?.enable&&KEEP.utils?initToggleShowToc():window.addEventListener("DOMContentLoaded",initToggleShowToc);